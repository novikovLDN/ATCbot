# Telegram VPN Bot

Telegram-бот для продажи VPN-подписок на базе aiogram 3.x.

## Особенности

- Поддержка 4 языков: русский, английский, узбекский, таджикский
- Система оплаты через СБП
- Управление подписками
- Административная панель для подтверждения платежей
- Хранение данных в SQLite

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Настройте конфигурацию в `config.py`:
   - `BOT_TOKEN` - токен бота от @BotFather
   - `ADMIN_TELEGRAM_ID` - ваш Telegram ID (узнать у @userinfobot)
   - При необходимости измените тарифы, реквизиты СБП и контакты поддержки

3. Добавьте VPN-ключи в файл `vpn_keys.txt` (один ключ на строку)

## Запуск

```bash
python main.py
```

Или через переменные окружения:

```bash
export BOT_TOKEN="your_bot_token"
export ADMIN_TELEGRAM_ID="your_telegram_id"
python main.py
```

## Структура проекта

- `main.py` - точка входа, инициализация бота
- `config.py` - конфигурация (токен, ID админа, тарифы)
- `database.py` - работа с SQLite
- `localization.py` - тексты для всех языков
- `handlers.py` - обработчики команд и callback'ов
- `vpn_utils.py` - утилиты для работы с VPN-ключами
- `vpn_keys.txt` - файл с VPN-ключами
- `bot.db` - база данных SQLite (создается автоматически)

## База данных

Автоматически создаются 3 таблицы:

- `users` - пользователи (telegram_id, username, language, created_at)
- `payments` - платежи (id, telegram_id, tariff, status, created_at)
- `subscriptions` - подписки (telegram_id, vpn_key, expires_at, is_active)

## Использование

1. Пользователь запускает бота командой `/start`
2. Выбирает язык
3. Может просмотреть профиль, купить VPN, узнать о сервисе или обратиться в поддержку
4. При покупке выбирает тариф и способ оплаты (СБП)
5. После оплаты нажимает "Я оплатил"
6. Администратор получает уведомление и может подтвердить или отклонить платеж
7. После подтверждения пользователь получает VPN-ключ

## Команды

- `/start` - запуск бота, выбор языка
- `/profile` - просмотр профиля и активной подписки

